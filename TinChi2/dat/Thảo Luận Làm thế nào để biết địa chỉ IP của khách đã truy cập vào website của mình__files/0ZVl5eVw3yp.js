/*!CK:49563487!*//*1448250582,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0gujd"]); }

__d("ActorSelectorNuxTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"};},null);
__d('PageVoiceDropdownSelector.react',['BootloadedComponent.react','Image.react','JSResource','React','XUIPopoverButton.react','XUISpinner.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=k.PropTypes,q=k.createClass({displayName:'PageVoiceDropdownSelector',propTypes:{loading:p.bool,maxWidth:p.number,pages:p.object.isRequired,selectedActorID:p.string,showPageName:p.bool,suppressed:p.bool.isRequired,user:p.object.isRequired,onChange:p.func.isRequired,onClick:p.func.isRequired},getDefaultProps:function(){return {showPageName:false};},getInitialState:function(){return {dialogShown:false,bootloadFinished:false};},_onChangeActor:function(r){this.props.onChange(r);this.setState({dialogShown:false});},_getDialogContextRef:function(){return this.refs['open-menu-button'];},_onBootloadFinished:function(){this.setState({bootloadFinished:true});},render:function(){var r=this.state.dialogShown&&!this.state.bootloadFinished,s=this.props.loading||r,t=null;if(s)t=k.createElement('div',{className:(!this.props.suppressed?"_3-8_":'')+(' '+"_2wk7")},k.createElement(m,null));var u=null;if(this.state.dialogShown)u=k.createElement(h,babelHelpers._extends({bootloadLoader:j('PageVoiceDropdownSelectorMenu.react'),bootloadPlaceholder:k.createElement('div',null),onComponentLoad:this._onBootloadFinished},this.props,{contextRef:this._getDialogContextRef,shown:true,shownBusinessID:this.state.shownBusinessID,onChange:this._onChangeActor,onToggle:this._onToggle}));return (k.createElement('span',null,k.createElement(l,{className:"_4z8-",image:k.createElement(i,{height:16,src:this._getSelectedImageSource(),width:16}),label:this.props.showPageName?this._getSelectedActorName():'',maxwidth:this.props.maxwidth,ref:'open-menu-button',suppressed:this.props.suppressed,type:'button',onClick:this._onButtonClick}),u,t));},_onButtonClick:function(event){this.setState({dialogShown:!this.state.dialogShown,shownBusinessID:this.state.defaultBusinessID},(function(){return this.props.onClick(event);}).bind(this));},_onToggle:function(r){this.setState({dialogShown:r});},_getSelectedImageSource:function(){var r=this.props.selectedActorID;if(!r)return '';if(r===this.props.user.id)return this.props.user.thumbSrc||'';return this.props.pages[r].thumbSrc||'';},_getSelectedActorName:function(){var r=this.props.selectedActorID;if(!r)return '';if(r===this.props.user.id)return this.props.user.name||'';return this.props.pages[r].name||'';}});f.exports=q;},null);
__d('ActorSelector.react',['BizSiteIdentifier.brands','BootloadedComponent.react','Bootloader','Event','JSResource','PageVoiceDropdownSelector.react','React','ReactDOM','ShortProfiles','TooltipData','cx','emptyFunction','getObjectValues','goURI','joinClasses','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=n.PropTypes,y=500,z=n.createClass({displayName:'ActorSelector',propTypes:{actorIDs:x.array.isRequired,actorPermissions:x.object,loading:x.bool,nuxBody:x.node,nuxEnabled:x.bool,nuxHoverContext:x.object,onChange:x.func.isRequired,onCompleteNux:x.func,onShowNux:x.func,selectedActorID:x.string,settingsURI:x.string,showName:x.bool,showNameMaxWidth:x.number,suppressed:x.bool,tooltipConstructor:x.func},getDefaultProps:function(){return {suppressed:true};},getInitialState:function(){return {actorData:{},nuxShown:false};},componentWillMount:function(){this._fetchActorData();},_getNUXContextRef:function(){return this.refs.selector;},render:function(){if(!this.props.selectedActorID||!this.state.actorData[this.props.selectedActorID])return n.createElement('div',null);if(this.props.actorIDs.length===0)return n.createElement('div',null);var aa=null;if(this.state.nuxShown)aa=n.createElement(i,{bootloadLoader:l('ActorSelectorNUXLayer.react'),bootloadPlaceholder:n.createElement('span',null),onCompleteNux:this._onCompleteNux,onClickSettings:this._onClickSettings,settingsURI:this.props.settingsURI,shown:true,contextRef:this._getNUXContextRef,nuxBody:this.props.nuxBody});return (n.createElement('span',{className:v("_6vh",this.props.className)},n.createElement('span',{ref:'selector'},n.createElement(m,{loading:this.props.loading,permissions:this.props.actorPermissions,pages:this.state.actorData,onChange:this.props.onChange,onClick:this._onClickSelector,selectedActorID:this.props.selectedActorID,searchBarVisible:true,showBusinessPages:false,showPageName:this.props.showName,showNameMaxWidth:this.props.showNameMaxWidth,showPersonalPagesInRoot:!h.isBizSite(),suppressed:this.props.suppressed,user:t(this.state.actorData)[0]})),aa));},componentDidMount:function(){this._setTooltip();if(this.props.nuxEnabled)if(this.props.nuxHoverContext){var aa=w(k.listen(this.props.nuxHoverContext,'mouseenter',(function(){j.loadModules(["ActorSelectorNUXLayer.react"],s);var ba=setTimeout((function(){aa.remove();if(this.props.nuxEnabled)this.setState({nuxShown:true});}).bind(this),y),ca=w(k.listen(this.props.nuxHoverContext,'mouseleave',function(){clearTimeout(ba);ca.remove();}));}).bind(this)));}else this.setState({nuxShown:true});},componentDidUpdate:function(aa,ba){if(this.props.actorIDs.toString()!==aa.actorIDs.toString())this._fetchActorData();this._setTooltip();if(this.state.nuxShown&&!ba.nuxShown&&this.props.onShowNux)this.props.onShowNux();},_fetchActorData:function(){p.getMulti(this.props.actorIDs,(function(aa){this.setState({actorData:aa});}).bind(this));},_onClickSelector:function(){if(this.state.nuxShown)this._onCompleteNux();},_onClickSettings:function(){this._onCompleteNux();u(this.props.settingsURI);},_onCompleteNux:function(){this.setState({nuxShown:false});if(this.props.onCompleteNux)this.props.onCompleteNux();},_setTooltip:function(){if(!this.refs.selector)return;var aa=this.state.actorData[this.props.selectedActorID];if(!aa)return;if(!this.props.tooltipConstructor)return;q.set(o.findDOMNode(this.refs.selector),this.props.tooltipConstructor(aa.name),'above','right');}});f.exports=z;},null);
__d("XActorSelectorNuxSeenWriteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/actor_selector\/nux\/mark_seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIActorSelector.react',['ActorSelector.react','ActorSelectorNuxTypes','Arbiter','AsyncRequest','Parent','React','SubscriptionsHandler','UFICentralUpdates','UFIFeedbackTargets','UFIUserActions','XActorSelectorNuxSeenWriteController','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=m.PropTypes,u='ufi_actor_selector_nux_disabled_event',v=m.createClass({displayName:'UFIActorSelector',propTypes:{actorIDs:t.array.isRequired,ftEntIdentifier:t.string.isRequired,isTimeline:t.bool,nuxEnabled:t.bool,nuxHoverContext:t.object,settingsURI:t.string},getInitialState:function(){var w=l.byClass(this.props.nuxHoverContext,'timelineUnitContainer');return {loading:false,nuxEnabled:this.props.nuxEnabled,nuxHoverContext:w?w:this.props.nuxHoverContext,selectedActorID:null};},render:function(){return (m.createElement(h,{actorIDs:this.props.actorIDs,loading:this.state.loading,nuxBody:this._getNUXBody(),nuxEnabled:this.state.nuxEnabled,nuxHoverContext:this.state.nuxHoverContext,onChange:this._onChange,onShowNux:this._onShowNux,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName}));},componentDidMount:function(){this._updateSelectedActorIDFromFeedbackTarget();this._subscriptions=new n();this._subscriptions.addSubscriptions(o.subscribe('feedback-updated',(function(w,x){if(this.props.ftEntIdentifier in x.updates)this._updateSelectedActorIDFromFeedbackTarget();}).bind(this)),j.subscribe(u,(function(){this.setState({nuxEnabled:false});}).bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},_updateSelectedActorIDFromFeedbackTarget:function(){p.getFeedbackTarget(this.props.ftEntIdentifier,(function(w){this.setState({loading:false,selectedActorID:w.actorforpost});}).bind(this));},_getNUXBody:function(){return s._("Choose whether to like and comment as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(w){return s._("Liking and commenting as {actorName}",[s.param('actorName',w)]);},_onChange:function(w){this.setState({loading:true});q.changeActor(this.props.ftEntIdentifier,w.value);},_onCompleteNux:function(){var w=this.props.isTimeline?i.UFI_TIMELINE:i.UFI,x=r.getURIBuilder().setEnum('nux_type',w).getURI();new k().setURI(x).send();},_onShowNux:function(){j.inform(u);}});f.exports=v;},null);
__d('AbstractActionList.react',['React','ReactChildren','ReactFragment'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=' \u00b7 ',l=h.createClass({displayName:'AbstractActionList',render:function(){var m=true,n=i.map(this.props.children,function(o){if(!o)return o;if(m){m=false;return o;}return j.create({BULLET:k,child:o});});return h.createElement('div',this.props,n);}});f.exports=l;},null);
__d('ActionList.react',['AbstractActionList.react','joinClasses','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j.createClass({displayName:'ActionList',render:function(){return (j.createElement(h,babelHelpers._extends({},this.props,{className:i(this.props.className,"fsm fwn fcg")}),this.props.children));}});f.exports=k;},null);
__d('InputLabel.react',['React','cx','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=0;function n(){return 'js_input_label_'+m++;}var o=h.createClass({displayName:'InputLabel',propTypes:{display:l.oneOf(['block','inline'])},getDefaultProps:function(){return {display:'block'};},render:function(){!(this.props.children.length===2)?j(0):undefined;var p=this.props.children[0],q=this.props.children[1],r=p.type==='input';p=h.cloneElement(p,{className:k(p.props.className,"uiInputLabelInput"+(r&&p.props.type==='radio'?' '+"uiInputLabelRadio":'')+(r&&p.props.type==='checkbox'?' '+"uiInputLabelCheckbox":'')),id:p.props.id||n()});q=h.cloneElement(q,{className:k(q.props.className,'uiInputLabelLabel'),htmlFor:p.props.id});var s="uiInputLabel"+(' '+"clearfix")+(this.props.display==='inline'?' '+"inlineBlock":'')+(r?' '+"uiInputLabelLegacy":'');return (h.createElement('div',babelHelpers._extends({},this.props,{className:k(this.props.className,s)}),p,q));}});f.exports=o;},null);
__d('AbstractCheckboxInput.react',['React','cx','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'AbstractCheckboxInput',propTypes:{tooltip:l.string},render:function(){!(!this.props.children||this.props.children.length===0)?j(0):undefined;var n=k(this.props.className,"_kv1"),o=h.createElement('input',babelHelpers._extends({},this.props,{className:null,type:'checkbox'}),undefined);return (h.createElement('label',{className:n},o,h.createElement('span',{'data-hover':this.props.tooltip?'tooltip':null,'aria-label':this.props.tooltip})));}});f.exports=m;},null);
__d('XUICheckboxInput.react',['AbstractCheckboxInput.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.createClass({displayName:'XUICheckboxInput',render:function(){return (i.createElement(h,babelHelpers._extends({},this.props,{className:k(this.props.className,"_55sg")}),undefined));}});f.exports=l;},null);
__d('XUIRadioInput.react',['React','cx','joinClasses','invariant'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'XUIRadioInput',render:function(){!(!this.props.children||this.props.children.length===0)?k(0):undefined;var m=j(this.props.className,"_55sh"),n=h.createElement('input',babelHelpers._extends({},this.props,{className:null,type:'radio'}),undefined);return (h.createElement('label',{className:m},n,h.createElement('span',null)));}});f.exports=l;},null);
__d('getSafeBodyFromHTML',['UserAgent'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h.isBrowser('IE <= 9');function j(k){var l,m=null;if(!i&&document.implementation&&document.implementation.createHTMLDocument){l=document.implementation.createHTMLDocument('foo');l.documentElement.innerHTML=k;m=l.getElementsByTagName('body')[0];}return m;}f.exports=j;},null);